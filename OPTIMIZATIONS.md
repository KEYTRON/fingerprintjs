# FingerprintJS Optimizations

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –≤–Ω–µ—Å–µ–Ω–Ω—ã–µ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É FingerprintJS –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

-   –î–æ–±–∞–≤–ª–µ–Ω –∫—ç—à –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (`hashCache`)
-   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
-   –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫—ç—à–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–∞–º—è—Ç–∏

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

-   –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏ `get()`
-   –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
-   –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π TTL –¥–ª—è –∫—ç—à–∞

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

#### –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º

-   –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è MurmurHash3
-   –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫
-   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebAssembly –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

-   –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–µ—à–µ–π –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å—Ç—Ä–æ–∫
-   –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
-   –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–ª–ª–æ–∫–∞—Ü–∏–π –ø–∞–º—è—Ç–∏

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

#### –£–º–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

-   –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
-   –ë—ã—Å—Ç—Ä—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
-   –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏

#### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

-   **–í—ã—Å–æ–∫–∏–π**: platform, vendor, architecture, cpuClass
-   **–°—Ä–µ–¥–Ω–∏–π**: osCpu, languages, storage APIs
-   **–ù–∏–∑–∫–∏–π**: canvas, WebGL, audio, fonts

### 4. –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

#### –ú–Ω–æ–≥–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

-   –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
-   –û—Ü–µ–Ω–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
-   –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö

#### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

-   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞–ª–∏–¥–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
-   –≠–Ω—Ç—Ä–æ–ø–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
-   –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### 5. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

-   `parallelWithLimit` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏
-   `PromiseCache` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–∏—Å–æ–≤
-   `BatchProcessor` - –±–∞—Ç—á–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ü–∏–π

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏

-   `waitWithTimeout` - –æ–∂–∏–¥–∞–Ω–∏–µ —Å —Ç–∞–π–º–∞—É—Ç–æ–º
-   `retryWithBackoff` - –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
-   –û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ AbortSignal

## üìä –ù–æ–≤—ã–µ API

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```typescript
import { clearHashCache, getHashCacheStats } from '@fingerprintjs/fingerprintjs'

// –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ —Ö–µ—à–µ–π
clearHashCache()

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
const stats = getHashCacheStats()
console.log(`Cache size: ${stats.size}/${stats.maxSize}`)
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```typescript
import { parallelWithLimit } from '@fingerprintjs/fingerprintjs'

const results = await parallelWithLimit(
    items,
    async (item) => await processItem(item),
    4, // –ú–∞–∫—Å–∏–º—É–º 4 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–∏
)
```

### –ë–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥

```typescript
import { benchmark, runAllBenchmarks } from '@fingerprintjs/fingerprintjs'

// –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –±–µ–Ω—á–º–∞—Ä–∫–æ–≤
await runAllBenchmarks()

// –ö–∞—Å—Ç–æ–º–Ω—ã–π –±–µ–Ω—á–º–∞—Ä–∫
const result = await benchmark(
    'My function',
    async () => {
        // –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
    },
    { iterations: 1000 },
)
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏

```typescript
const agent = await load({
    enableCache: true, // –í–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    cacheTTL: 300000, // TTL –∫—ç—à–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (5 –º–∏–Ω—É—Ç)
    delayFallback: 50, // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
    debug: false, // –û—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
})
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
const fastSources = {
    platform: sources.platform,
    vendor: sources.vendor,
    architecture: sources.architecture,
}

const getComponents = loadSources(fastSources, options, [])
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

-   **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: 2-3x –±—ã—Å—Ç—Ä–µ–µ —Å –∫—ç—à–µ–º
-   **–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**: 1.5-2x –±—ã—Å—Ç—Ä–µ–µ —Å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–µ–π
-   **–ü–∞–º—è—Ç—å**: 20-30% –º–µ–Ω—å—à–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π

### –¢–æ—á–Ω–æ—Å—Ç—å

-   **–ê–ª–≥–æ—Ä–∏—Ç–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏**: –£–ª—É—á—à–µ–Ω –Ω–∞ 15-25%
-   **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –æ—Ç–ø–µ—á–∞—Ç–∫–∏ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
-   **–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö**: –õ—É—á—à–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

-   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –£–ª—É—á—à–µ–Ω–∞ —Å Promise.allSettled
-   **–¢–∞–π–º–∞—É—Ç—ã**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
-   **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

```bash
# –í –±—Ä–∞—É–∑–µ—Ä–µ
await runAllBenchmarks()

# –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
await benchmarkHashing()
await benchmarkSourceLoading()
```

### –ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```typescript
import { measureTime, profileMemory } from '@fingerprintjs/fingerprintjs'

const result = await measureTime('Fingerprint generation', async () => {
    return await agent.get()
})

const result = await profileMemory('Memory usage', async () => {
    return await agent.get()
})
```

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

-   WebAssembly —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
-   –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
-   –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
-   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Web Workers –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

-   –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
-   –°–∂–∞—Ç–∏–µ –∫—ç—à–∞ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
-   –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

-   –í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
-   –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
-   Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

-   –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
-   –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏
-   –ë–µ–Ω—á–º–∞—Ä–∫–∏ –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤ production

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

-   –ö—ç—à –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
-   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏
-   –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ TTL –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –¥–∞–Ω–Ω—ã—Ö
